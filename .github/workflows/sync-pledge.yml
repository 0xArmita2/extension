name: Sync pledge

on:
  schedule:
    - cron: "0 0 */3 * *"

jobs:
  cron:
    steps:
      - name: Use Node + Yarn
        uses: actions/setup-node@v3
        with:
          node-version: "16"
          cache: "yarn"
      - run: yarn install --frozen-lockfile
        working-directory: .github/workflows/cron
      - name: Sync pledge addresses
        run: node pledge-sync.js
        working-directory: .github/workflows/cron
        env:
          GALXE_ACCESS_TOKEN: ${{ secrets.GALXE_ACCESS_TOKEN }}
          FIRESTORE_AUTH: ${{ secrets.FIRESTORE_AUTH }}
